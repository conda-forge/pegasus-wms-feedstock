{% set name = "pegasus-wms" %}
{% set version = "5.0.9" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/{{ name[0] }}/{{ name }}/pegasus-wms-{{ version }}.tar.gz
  sha256: 7f0d8599e529f3c2693a1774a5241d6232d65bb33842b7a5f6db5039774679be

build:
  noarch: python
  number: 0
  script: {{ PYTHON }} -m pip install . -vv

requirements:
  host:
    - pip
    - python {{ python_min }}
    - setuptools <69
    - wheel
  run:
    - flask >1.1,<2.3
    - flask-caching >1.8
    - gitpython >1.0
    - pamela >=1.0,<1.1.0
    - pegasus-wms.api
    - pegasus-wms.common
    - pegasus-wms.worker
    - pika >=1.1.0
    - python >={{ python_min }}
    - pyyaml >5.3
    - requests >2.23
    - sqlalchemy >1.3,<1.4
    - werkzeug <3.1.0

test:
  requires:
    - pip
    - python {{ python_min }}
  imports:
    - Pegasus
  commands:
    - python -m pip check
    - python -m pip show pegasus-wms

about:
  home: http://pegasus.isi.edu
  dev_url: https://github.com/pegasus-isi/pegasus.git
  doc_url: https://pegasus.isi.edu/documentation/
  license: Apache-2.0
  license_file: LICENSE
  summary: Pegasus Workflow Management System Python API
  description: |
    Pegasus Workflow Management System Python API
    =============================================

    This package contains the Python APIs for Pegasus WMS, including:

    1. The DAX API (Versions 2 and 3)
    2. The PDAX API (Version 2)
    3. The monitoring API
    4. The Stampede database API
    5. The Pegasus statistics API
    6. The Pegasus plots API
    7. Misc. Pegasus utilities
    8. The pegasus service, including the ensemble manager and dashboard

extra:
  recipe-maintainers:
    - duncanmmacleod
